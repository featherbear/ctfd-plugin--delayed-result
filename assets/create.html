{% extends "admin/challenges/create.html" %}

{% block header %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script id="flatpickrSrc" async src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<div class="alert alert-secondary" role="alert">
	Submissions will be held until a certain time. After this time, the latest held submission will be processed. New submissions will be processed as usual
</div>
{% endblock %}


{% block value %}
	{{ super() }}
	<div class="form-group">
		<label for="value">Hold Expiry<br>
			<small class="form-text text-muted">
				When submissions will be stop being held
			</small>
		</label>
		<input type="datetime-local" class="form-control" name="expiry" required>
		<script>
			console.log('create exec');
			document.querySelector('#flatpickrSrc').addEventListener('load', () => {
				console.log('load');
				flatpickr("input[name=expiry]", {
					enableTime: true,
					dateFormat: "Z",
					altInput: true,
					altFormat: "d-m-Y H:i",
				})
			})
		</script>
	</div>
{% endblock %}

{% block type %}
<input type="hidden" value="delayed" name="type" id="chaltype">
{% endblock %}